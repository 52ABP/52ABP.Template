!function(n,t){"use strict";"object"==typeof module&&module.exports?module.exports=t(require("./")):"function"==typeof define&&define.amd?define(["moment"],t):t(n.moment)}(this,function(n){"use strict";if(!n.tz)throw new Error("moment-timezone-utils.js must be loaded after moment-timezone.js");var i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX",f=1e-6;function u(n,t){for(var e="",r=Math.abs(n),o=Math.floor(r),s=function(n,t){for(var e,r=".",o="";0<t;)t-=1,n*=60,e=Math.floor(n+f),r+=i[e],n-=e,e&&(o+=r,r="");return o}(r-o,Math.min(~~t,10));0<o;)e=i[o%60]+e,o=Math.floor(o/60);return n<0&&(e="-"+e),e&&s?e+s:(s||"-"!==e)&&(e||s)||"0"}function a(n){return function(n){if(!n.name)throw new Error("Missing name");if(!n.abbrs)throw new Error("Missing abbrs");if(!n.untils)throw new Error("Missing untils");if(!n.offsets)throw new Error("Missing offsets");if(n.offsets.length!==n.untils.length||n.offsets.length!==n.abbrs.length)throw new Error("Mismatched array lengths")}(n),[n.name,function(n){var t,e,r=0,o=[],s=[],i=[],f={};for(t=0;t<n.abbrs.length;t++)void 0===f[e=n.abbrs[t]+"|"+n.offsets[t]]&&(o[f[e]=r]=n.abbrs[t],s[r]=u(Math.round(60*n.offsets[t])/60,1),r++),i[t]=u(f[e],0);return o.join(" ")+"|"+s.join(" ")+"|"+i.join("")}(n),function(n){var t,e=[],r=0;for(t=0;t<n.length-1;t++)e[t]=u(Math.round((n[t]-r)/1e3)/60,1),r=n[t];return e.join(" ")}(n.untils)+function(n){if(!n)return"";if(n<1e3)return"|"+n;var t=String(0|n).length-2;return"|"+Math.round(n/Math.pow(10,t))+"e"+t}(n.population)].join("|")}function c(n,t){var e;if(n.length!==t.length)return!1;for(e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function l(n,t){var e=[],r=[];return n.links&&(r=n.links.slice()),function(n,t,e,r){var o,s,i,f,u,a,l,h,p=[];for(o=0;o<n.length;o++){for(a=!1,i=n[o],s=0;s<p.length;s++)f=(u=p[s])[0],h=f,c((l=i).offsets,h.offsets)&&c(l.abbrs,h.abbrs)&&c(l.untils,h.untils)&&(i.population>f.population?u.unshift(i):i.population===f.population&&r&&r[i.name]?u.unshift(i):u.push(i),a=!0);a||p.push([i])}for(o=0;o<p.length;o++)for(u=p[o],t.push(u[0]),s=1;s<u.length;s++)e.push(u[0].name+"|"+u[s].name)}(n.zones,e,r,t),{version:n.version,zones:e,links:r.sort()}}function h(n,t,e){var r=Array.prototype.slice,o=function(n,t,e){var r,o,s=0,i=n.length+1;for(e||(e=t),e<t&&(o=t,t=e,e=o),o=0;o<n.length;o++)null!=n[o]&&((r=new Date(n[o]).getUTCFullYear())<t&&(s=o+1),e<r&&(i=Math.min(i,o+1)));return[s,i]}(n.untils,t,e),s=r.apply(n.untils,o);return s[s.length-1]=null,{name:n.name,abbrs:r.apply(n.abbrs,o),untils:s,offsets:r.apply(n.offsets,o),population:n.population}}return n.tz.pack=a,n.tz.packBase60=u,n.tz.createLinks=l,n.tz.filterYears=h,n.tz.filterLinkPack=function(n,t,e,r){var o,s,i=n.zones,f=[];for(o=0;o<i.length;o++)f[o]=h(i[o],t,e);for(s=l({zones:f,links:n.links.slice(),version:n.version},r),o=0;o<s.zones.length;o++)s.zones[o]=a(s.zones[o]);return s},n});